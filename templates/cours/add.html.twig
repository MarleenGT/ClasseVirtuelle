{% extends 'base.html.twig' %}
{% block title 'Ajout cours' %}
{% block body %}
    {% if error is defined %}
        {{ error }}
    {% endif %}
    {% if conflit is defined %}
        {{ dump(conflit) }}
    {% endif %}
    {{ form(form) }}
{% endblock %}
{% block javascripts %}
    <script>
        let addCours = {
            index:{
                typeChoice:$("#cours_typeChoice"),
                sousgroupe:$("#cours_id_sousgroupe").parent('div'),
                classe:$("#cours_id_classe").parent('div'),
                matiere:$("#cours_matiere"),
                autre:$("#cours_autre").parent('div'),
                radioClasse:$("#cours_typeChoice_0")
            },
            method:{
                initialize:function(){
                    addCours.index.typeChoice.on('change', function () {
                        addCours.index.sousgroupe.toggle();
                        addCours.index.classe.toggle();
                    });
                    addCours.index.matiere.on('change', addCours.method.checkMatiere);
                    addCours.index.radioClasse.prop('checked', true);
                    console.log(addCours.index.autre)
                    addCours.index.sousgroupe.hide();
                    this.checkMatiere();
                },
                checkMatiere:function(){
                    let option = addCours.index.matiere.children("option:selected").text();
                    if (option === "Autre"){
                        addCours.index.autre.show();
                    } else {
                        addCours.index.autre.hide();
                    }
                }
            }
        }
        addCours.method.initialize();
    </script>
{% endblock %}