{% extends 'base.html.twig' %}
{% block title 'Utilisateurs' %}
{% block body %}
    <form method="POST" action="{{ path('utilisateurs.add') }}">
        <select id="util_select" name="typeUtil">
            <option value="Eleves">Eleves</option>
            <option value="Professeurs">Professeurs</option>
            <option value="Personnels">Personnels</option>
        </select>
        <div id="ajax_results">
            {% if form is defined %}
                {{ form(form) }}
            {% endif %}
        </div>
        <input type="submit" value="Ajouter">
    </form>
{% endblock %}
{% block javascripts %}
    <script>
        let select =  document.getElementById('util_select');

        select.addEventListener("change", function () {
            XHR();
        })
        function XHR() {
            let xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState === 4 && this.status === 200) {
                }
            };
            xhttp.open("GET", "{{ path('utilisateurs.choice') }}", true);
            xhttp.send(select.value);
        }
        XHR();
    </script>
{% endblock %}